<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Visa-Card</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" />
    <style>
        .visa-card {
            min-height: 250px;
            width: 450px;
            left: 0;
            right: 0;
            top: -150px;
        }

        .visa-card::before {
            position: absolute;
            content: "V";
            font-weight: bold;
            font-size: 456px;
            color: white;
            text-align: center;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            margin-top: -235px;
            opacity: 0.1;
            transform: rotate(16deg);
        }

        .card-chip {
            margin-top: -1px;
            margin-left: -1px;
        }

        .visa-card #viewCardNumber span {
            font-family: emoji;
            letter-spacing: -29px;
        }

        .visa-card .emoji {
            font-family: emoji;
            letter-spacing: -9px;
        }
    </style>
</head>

<body class="bg-dark-subtle">
    <header class="pt-5 pb-5 bg-secondary">

    </header>
    <main class="mt-5">
        <div class="container-fluid">
            <div class="row align-items-center m-auto position-relative" style="width: 600px; top: 180px;">
                <div class="card">
                    <div class="card-body pb-5">
                        <div class="position-relative pb-5">
                            <div
                                class="fade visa-card overflow-hidden bg-dark p-3 m-auto rounded shadow position-absolute text-white fontend">
                                <div class="row align-items-center pb-3">
                                    <div class="col-6">
                                        <div class="p-1 border rounded shadow opacity-50 bg-white" style="width: 80px;">
                                            <div class="container card-chip opacity-25">
                                                <div class="row">
                                                    <div class="col p-1 border"></div>
                                                    <div class="col p-1 border"></div>
                                                    <div class="col p-1 border"></div>
                                                    <div class="col p-1 border"></div>
                                                </div>
                                                <div class="row">
                                                    <div class="col p-1 border"></div>
                                                    <div class="col p-1 border"></div>
                                                    <div class="col p-1 border"></div>
                                                    <div class="col p-1 border"></div>
                                                </div>
                                                <div class="row">
                                                    <div class="col p-1 border"></div>
                                                    <div class="col p-1 border"></div>
                                                    <div class="col p-1 border"></div>
                                                    <div class="col p-1 border"></div>
                                                </div>
                                                <div class="row">
                                                    <div class="col p-1 border"></div>
                                                    <div class="col p-1 border"></div>
                                                    <div class="col p-1 border"></div>
                                                    <div class="col p-1 border"></div>
                                                </div>
                                                <div class="row">
                                                    <div class="col p-1 border"></div>
                                                    <div class="col p-1 border"></div>
                                                    <div class="col p-1 border"></div>
                                                    <div class="col p-1 border"></div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-6 text-end fst-italic">
                                        <span class="opacity-50 text-uppercase">VISA</span>
                                    </div>
                                </div>
                                <div class="pt-4">
                                    <div class="" id="viewCardNumber">
                                        <span class="fs-4 me-1">*</span>
                                        <span class="fs-4 ms-3 me-1">*</span>
                                        <span class="fs-4 ms-3 me-1">*</span>
                                        <span class="fs-4 ms-3 me-1">*</span>
                                        <span class="fs-4 ms-3 me-1 ps-2">*</span>
                                        <span class="fs-4 ms-3 me-1">*</span>
                                        <span class="fs-4 ms-3 me-1">*</span>
                                        <span class="fs-4 ms-3 me-1">*</span>
                                        <span class="fs-4 ms-3 me-1 ps-2">*</span>
                                        <span class="fs-4 ms-3 me-1">*</span>
                                        <span class="fs-4 ms-3 me-1">*</span>
                                        <span class="fs-4 ms-3 me-1">*</span>
                                        <span class="fs-4 ms-3 me-1 ps-2">*</span>
                                        <span class="fs-4 ms-3 me-1">*</span>
                                        <span class="fs-4 ms-3 me-1">*</span>
                                        <span class="fs-4 ms-3 me-1">*</span>
                                    </div>
                                </div>
                                <div class="row align-items-end">
                                    <div class="col-9">
                                        <div class="fs-2 opacity-50 font-monospace text-uppercase" id="viewCardHolder"
                                            style="margin-bottom: -10px;">_ _ _ _ _ _</div>
                                    </div>
                                    <div class="col-3 text-center">
                                        <div>
                                            <label class="form-label mb-0 opacity-50">Expire</label>
                                        </div>
                                        <div>
                                            <label class="form-label mb-0 emoji pe-1" id="viewExpireMonth">08</label>
                                            <span class="ps-1 opacity-25">/</span>
                                            <label class="form-label mb-0 emoji ps-1" id="viewExpireYear">23</label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div
                                class="fade visa-card overflow-hidden bg-dark p-3 m-auto rounded shadow position-absolute text-white backend">
                                <div class="row align-items-center pb-2 pt-3">
                                    <div class="pt-4 pb-4 w-100 bg-black"></div>
                                </div>
                                <div class="row align-items-center pb-2 pt-2">
                                    <div class="col-9 m-auto">
                                        <div class="p-3 bg-white rounded">
                                            <div class="text-dark text-center opacity-75">
                                                <span>CVV</span>
                                                <span class="ps-2 pe-2">|</span>
                                                <span class="font-monospace" id="viewCVV">***</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row align-items-center p-3">
                                    <div class="text-end fst-italic col-12">
                                        <span class="opacity-50 text-uppercase">VISA</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="card-body pt-5">
                        <div class="mb-3">
                            <label class="form-label">Card Number</label>
                            <input type="text" name="card_number" class="form-control">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Card Holder</label>
                            <input type="text" name="card_holder" class="form-control">
                        </div>
                        <div class="row align-items-center mb-3">
                            <div class="col-4">
                                <label class="form-label">Expire Month</label>
                                <select name="expire_month" class="form-control">
                                    <option value="1">January</option>
                                    <option value="2">February</option>
                                    <option value="3">March</option>
                                    <option value="4">April</option>
                                    <option value="5">May</option>
                                    <option value="6">June</option>
                                    <option value="7">July</option>
                                    <option value="8">August</option>
                                    <option value="9">September</option>
                                    <option value="10">October</option>
                                    <option value="11">November</option>
                                    <option value="12">December</option>
                                </select>
                            </div>
                            <div class="col-4">
                                <label class="form-label">Expire Year</label>
                                <select name="expire_year" class="form-control">
                                    <option value="2023">2023</option>
                                    <option value="2024">2024</option>
                                    <option value="2025">2025</option>
                                    <option value="2026">2026</option>
                                    <option value="2027">2027</option>
                                    <option value="2028">2028</option>
                                    <option value="2029">2029</option>
                                    <option value="2030">2030</option>
                                </select>
                            </div>
                            <div class="col-4">
                                <label class="form-label">CVV</label>
                                <input type="text" name="cvv" class="form-control">
                            </div>
                        </div>
                    </div>
                    <div class="card-footer bg-transparent">
                        <div class="pt-2 pb-3">
                            <button class="btn btn-primary w-100 shadow" type="button">Submit</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>
    <script>
        class VisaCard {
            isBackend = false;
            cardNumber = "";
            cardHolder = "";
            expireMonth = "1";
            expireYear = "2023";
            CVV = "";
            constructor() {
                this.setEvents();
                this.binds();
            }
            setEvents() {
                const names = {
                    card_number: "cardNumber",
                    card_holder: "cardHolder",
                    expire_month: "expireMonth",
                    expire_year: "expireYear",
                    cvv: "CVV"
                };
                for (const [key, value] of Object.entries(names)) {
                    const element = document.querySelector(`[name='${key}']`);
                    if (element) {
                        element.onfocus = () => {
                            if (key === 'cvv') {
                                if (!this.isBackend) {
                                    this.isBackend = true;
                                    this.binds();
                                }
                            } else {
                                if (this.isBackend) {
                                    this.isBackend = false;
                                    this.binds();
                                }
                            }
                        }
                        element.oninput = () => {
                            this[value] = element.value;
                            this.binds();
                        }
                        element.onchange = () => {
                            this[value] = element.value;
                            this.binds();
                        }
                    }
                }
            }
            binds() {
                const card_number = document.querySelector("#viewCardNumber");
                if (card_number) {
                    const number_text = `${this.cardNumber || ''}`.trim().split("");
                    card_number.innerHTML = new Array(16).fill("").map((val, idx) => {
                        const text = number_text[idx] || "*";
                        const fz = idx === 0 ? "33px" : (text === "*" ? "25px" : "33px");
                        const cls = idx % 4 === 0 ? ["ps-2"] : [];
                        idx === 0 ? cls.push("me-1") : (text === '*' ? cls.push("ms-3 me-1") : cls.push("ms-1 me-1"));
                        return `<span class='${cls.join(" ")}' style="font-size: ${fz}">${text}</span>`

                    }).join("");
                }
                const card_holder = document.querySelector("#viewCardHolder");
                card_holder ? card_holder.innerHTML = this.cardHolder || '_ _ _ _ _ _' : undefined;
                const expire_month = document.querySelector("#viewExpireMonth");
                expire_month ? expire_month.innerHTML = `00${this.expireMonth}`.slice(-2) : undefined;
                const expire_year = document.querySelector("#viewExpireYear");
                expire_year ? expire_year.innerHTML = `00${this.expireYear}`.slice(-2) : undefined;
                const cvv = document.querySelector("#viewCVV");
                cvv ? cvv.innerHTML = `${this.CVV}****`.slice(0, Math.max(3, `${this.CVV || ''}`.length)) : undefined;
                const backend = document.querySelector(".backend");
                const fontend = document.querySelector(".fontend");
                if (backend && fontend) {
                    if (this.isBackend) {
                        !backend.classList.contains("show") ? backend.classList.add("show") : undefined;
                        fontend.classList.contains("show") ? fontend.classList.remove("show") : undefined;
                    } else {
                        backend.classList.contains("show") ? backend.classList.remove("show") : undefined;
                        !fontend.classList.contains("show") ? fontend.classList.add("show") : undefined;
                    }
                }
            }
        }
        const visacard = new VisaCard();
    </script>
</body>

</html>
